document.addEventListener('DOMContentLoaded',function(){var c=document.getElementById('consent-checkbox'),b=document.getElementById('open-copilot'),ct=document.getElementById('copilot-container');c.addEventListener('change',function(){b.disabled=!this.checked});b.addEventListener('click',function(){if(!c.checked)return alert('Please agree to the Privacy Policy and Terms.');ct.style.display='block';b.style.display='none'});document.addEventListener('submit',async function(e){if(e.target&&e.target.id==='copilot-form'){e.preventDefault();var t=e.target.userInput.value.trim();if(!t)return;var r=document.getElementById('copilot-response');r.textContent='Thinking...';try{var res=await fetch('/api/copilot',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({userInput:t})});if(!res.ok)throw new Error('Network');var j=await res.json();r.textContent=j.reply||'No response.'}catch(err){r.textContent='Error contacting Copilot server.'}return false}})});